!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}document.addEventListener("DOMContentLoaded",(function(t){var a,n=function(t,a){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,a):void 0}}(t))||a&&t&&"number"==typeof t.length){n&&(t=n);var s=0,r=function(){};return{s:r,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}(document.getElementsByClassName("eb-adv-search-wrapper"));try{var s=function(){var e,t,n=a.value,s=n.getElementsByClassName("adv-search-field")[0],r=n.getElementsByClassName("eb-adv-search-result")[0],o=n.getElementsByClassName("eb-adv-search-content")[0],l=n.getElementsByClassName("eb-adv-search-loader")[0],i=n.getElementsByClassName("eb-adv-search-close")[0],d=n.getElementsByClassName("eb-adv-search-not-found")[0],c=n.getElementsByClassName("eb-adv-searchform")[0],p=JSON.parse(c.getAttribute("data-searchsettings")),u=p.post_type,y=p.showTotalResult,v=p.displayContentImage,m=p.showTaxonomyFilter,f=p.showLoadMore,h=p.initialValue,g=p.showPopularKeywords,b=p.popularKeywordslimit,E=p.popularKeywordsRank,k=p.popularKeywordsRankLength;y&&(e=n.getElementsByClassName("eb-adv-search-total-results-wrapper")[0],t=n.getElementsByClassName("eb-adv-search-total-results-count")[0]);var w=n.getElementsByClassName("eb-adv-search-cate")[0],_=n.getElementsByClassName("eb-adv-search-load-more")[0],L=n.getElementsByClassName("eb-adv-search-load-more-btn")[0],N="",C="";if(m)if(N=JSON.parse(p.selectedTaxonomy),c.classList.contains("preset-modern")){var B=c.getElementsByClassName("eb-adv-search-filter-icon")[0],T=n.getElementsByClassName("eb-adv-search-filter-area")[0];B.addEventListener("click",(function(e){"none"===T.style.display?T.style.display="block":T.style.display="none"}));for(var S=T.getElementsByClassName("search-filter"),x=!1,A=0;A<S.length;A++)if(S[A].checked){x=!0;break}!x&&S.length>0&&(S[0].checked=!0,C=S[0].value),T.querySelectorAll('input[type="radio"]').forEach((function(e){e.addEventListener("change",(function(){var e=T.querySelector('input[name="search-filter"]:checked');C=e?e.value:null}))}))}else w.addEventListener("change",(function(e){C=e.target.value.trim()}));g&&n.querySelectorAll(".eb-popular-keyword-item").forEach((function(e){e.addEventListener("click",(function(e){if("eb-popular-keyword-item"!==e.target.className)return!1;searchText=e.target.dataset.keyword,s.value=e.target.dataset.keyword,s.dispatchEvent(new Event("keyup"))}))}));var M=0,O=1,P="";s.addEventListener("keyup",(function(a){setTimeout((function(){var n=a.target.value.trim();if(n!==P){P=n;var s=n.length;s<1&&(r.style.display="none"),l.style.display="block",i.style.display="none";var c=new FormData;c.append("action","adv_search_result_content"),c.append("adv_search_nonce",EssentialBlocksProLocalize.adv_search_nonce),c.append("searchText",n),c.append("postType",u),c.append("displayContentImage",v),c.append("catName",C),c.append("initialValue",h),c.append("selectedTaxonomy",N.value),c.append("showPopularKeywords",g),c.append("popularKeywordslimit",b),c.append("popularKeywordsRank",E),c.append("popularKeywordsRankLength",k),fetch(EssentialBlocksProLocalize.ajax_url,{method:"POST",body:c}).then((function(e){return e.text()})).then((function(a){var n=JSON.parse(a);if(n.success){var c,p;if(l.style.display="none",r.style.display="none",d.style.display="none",void 0!==_&&((null===(c=n.data)||void 0===c?void 0:c.post_count)>h?_.style.display="block":_.style.display="none"),s>0)if(r.style.display="block",o.innerHTML="",null!==(p=n.data)&&void 0!==p&&p.post_lists){var u;y&&(null!==(u=n.data)&&void 0!==u&&u.post_count?(e.style.display="block",t.innerHTML=n.data.post_count):(e.style.display="none",t.innerHTML=0)),o.style.display="block",o.insertAdjacentHTML("beforeend",n.data.post_lists),f&&(M=n.data.page_count)}else o.style.display="none",d.style.display="block",void 0!==_&&(_.style.display="none"),y&&(t.innerHTML=0);i.style.display=s>0?"block":"none"}})).catch((function(e){return console.log(e)}))}}),[1500])})),i.addEventListener("click",(function(e){e.preventDefault(),i.style.display="none",s.value="",r.style.display="none"})),f&&L.addEventListener("click",(function(e){e.preventDefault(),O++;var t=new FormData;t.append("action","adv_search_loadmore_content"),t.append("adv_search_nonce",EssentialBlocksProLocalize.adv_search_nonce),t.append("searchText",s.value),t.append("postType",u),t.append("displayContentImage",v),t.append("catName",C),t.append("initialValue",h),t.append("showLoadMore",f),t.append("currentPage",O),t.append("selectedTaxonomy",N.value),fetch(EssentialBlocksProLocalize.ajax_url,{method:"POST",body:t}).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);t.success&&t.data.post_lists&&o.insertAdjacentHTML("beforeend",t.data.post_lists)})).catch((function(e){return console.log(e)})),O==M&&(_.style.display="none")}))};for(n.s();!(a=n.n()).done;)s()}catch(e){n.e(e)}finally{n.f()}}))}();